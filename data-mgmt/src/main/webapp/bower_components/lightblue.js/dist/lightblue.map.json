{"version":3,"file":"bundle.js","sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","lib/clientutil.js","lib/data.js","lib/lightblue.js","lib/metadata.js","lib/query.js","lib/rest.js"],"names":[],"mappings":"AAAA;ACAA;;ACAA;;ACAA;;ACAA;;ACAA;;ACAA","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","exports.resolve=function(){function e(e){return\"string\"!=typeof e?\"\":(e=e.replace(new RegExp(\"^/*\"),\"\"),e=e.replace(new RegExp(\"/*$\"),\"\"))}function n(e){return\"undefined\"!=typeof e&&\"\"!==e}return 0===arguments.length?\"\":Array.prototype.slice.call(arguments,0).filter(n).map(e).join(\"/\")},exports.isEmpty=function(e){return\"undefined\"==typeof e||\"\"===e};","function LightblueDataClient(e){this.host=e}function FindRequest(e,t){var o=resolve(e,\"find\",t.entity,t.version),s={objectType:t.entity,version:t.version,query:t.query,projection:t.projection};t.sort instanceof Object&&Object.keys(t.sort).length>0&&(s.sort=t.sort),t.range&&(s.range=[],s.range[0]=t.range.from||t.range[0]||0,s.range[1]=t.range.to||t.range[1]),RestRequest.call(this,\"post\",o,s)}function InsertRequest(e,t){var o=resolve(e,\"insert\",t.entity,t.version),s={objectType:t.entity,version:t.version,data:t.data,projection:t.projection};RestRequest.call(this,\"put\",o,s)}function SaveRequest(e,t){var o=resolve(e,\"save\",t.entity,t.version),s={objectType:t.entity,version:t.version,data:t.data,upsert:t.upsert,projection:t.projection};RestRequest.call(this,\"post\",o,s)}function UpdateRequest(e,t){var o=resolve(e,\"update\",t.entity,t.version),s={objectType:t.entity,version:t.version,query:t.query,update:t.update,projection:t.projection};RestRequest.call(this,\"post\",o,s)}function DeleteRequest(e,t){var o=resolve(e,\"delete\",t.entity,t.version),s={objectType:t.entity,version:t.version,query:t.query};RestRequest.call(this,\"post\",o,s)}var resolve=require(\"./clientutil\").resolve,RestRequest=require(\"./rest\").RestRequest;module.exports=LightblueDataClient,LightblueDataClient.prototype.find=function(e){return new FindRequest(this.host,e)},LightblueDataClient.prototype.insert=function(e){return new InsertRequest(this.host,e)},LightblueDataClient.prototype.update=function(e){return new UpdateRequest(this.host,e)},LightblueDataClient.prototype.save=function(e){return new SaveRequest(this.host,e)},LightblueDataClient.prototype.delete=function(e){return new DeleteRequest(this.host,e)},FindRequest.prototype=Object.create(RestRequest.prototype),FindRequest.prototype.constructor=FindRequest,InsertRequest.prototype=Object.create(RestRequest.prototype),InsertRequest.prototype.constructor=InsertRequest,SaveRequest.prototype=Object.create(RestRequest.prototype),SaveRequest.prototype.constructor=SaveRequest,UpdateRequest.prototype=Object.create(RestRequest.prototype),UpdateRequest.prototype.constructor=UpdateRequest,DeleteRequest.prototype=Object.create(RestRequest.prototype),DeleteRequest.prototype.constructor=DeleteRequest;","function LightblueClient(e,t){this.data=e,this.metadata=t}function getDataClient(e){return new DataClient(e)}function getMetadataClient(e){return new MetadataClient(e)}function getClient(e,t){\"undefined\"==typeof t&&(e=resolve(e,\"data\"),t=resolve(e,\"metadata\"));var a=getDataClient(e),i=getMetadataClient(t);return new LightblueClient(a,i)}var DataClient=require(\"./data.js\"),MetadataClient=require(\"./metadata.js\"),query=require(\"./query.js\"),resolve=require(\"./clientutil.js\").resolve;exports.getDataClient=getDataClient,exports.getMetadataClient=getMetadataClient,exports.getClient=getClient,exports.field=query.field;","function LightblueMetadataClient(e){this.host=e}function NamesRequest(e,t){var s=t&&t.length>0?\"s=\"+t.join(\",\"):\"\";RestRequest.call(this,\"get\",util.resolve(e,s))}function VersionsRequest(e,t){if(util.isEmpty(t))throw new Error(\"entityName required for versions request.\");RestRequest.call(this,\"get\",util.resolve(e,t))}function RolesRequest(e,t,s){RestRequest.call(this,\"get\",util.resolve(e,t,s,\"roles\"))}function MetadataRequest(e,t,s){if(util.isEmpty(t)||util.isEmpty(s))throw new Error(\"entityName and version required for metadata request.\");RestRequest.call(this,\"get\",util.resolve(e,t,s))}var util=require(\"./clientutil\"),RestRequest=require(\"./rest\").RestRequest;module.exports=LightblueMetadataClient,LightblueMetadataClient.prototype.getNames=function(e){return new NamesRequest(this.host,e)},LightblueMetadataClient.prototype.getVersions=function(e){return new VersionsRequest(this.host,e)},LightblueMetadataClient.prototype.getMetadata=function(e,t){return new MetadataRequest(this.host,e,t)},LightblueMetadataClient.prototype.getRoles=function(e,t){return new RolesRequest(this.host,e,t)},NamesRequest.prototype=Object.create(RestRequest.prototype),NamesRequest.prototype.constructor=NamesRequest,VersionsRequest.prototype=Object.create(RestRequest.prototype),VersionsRequest.prototype.constructor=VersionsRequest,RolesRequest.prototype=Object.create(RestRequest.prototype),RolesRequest.prototype.constructor=RolesRequest;","function QueryExpression(o){o instanceof Object&&(this.json=o)}function NaryLogicalExpression(o,r){if(this.op=o,this.expressions=r||[],r instanceof Array){var e={};e[o]=r.map(function(o){return o.toJSON()})}QueryExpression.call(this,e)}function AndExpression(o){o instanceof Array||(o=Array.prototype.slice.call(arguments,0)),NaryLogicalExpression.call(this,\"$and\",o)}function OrExpression(o){o instanceof Array||(o=Array.prototype.slice.call(arguments,0)),NaryLogicalExpression.call(this,\"$or\",o)}function Field(o){this.field=o}function FieldComparison(o,r,e){QueryExpression.call(this,{field:o,op:r,rfield:e})}function ValueComparison(o,r,e){QueryExpression.call(this,{field:o,op:r,rvalue:e})}module.exports.field=function(o){return new Field(o)},QueryExpression.prototype.and=function(o){return new AndExpression(this,o)},QueryExpression.prototype.or=function(o){return new OrExpression(this,o)},QueryExpression.prototype.toJSON=function(){return this.json},NaryLogicalExpression.prototype=new QueryExpression,NaryLogicalExpression.prototype.constructor=NaryLogicalExpression,AndExpression.prototype=new NaryLogicalExpression,AndExpression.prototype.constructor=AndExpression,AndExpression.prototype.and=function(o){return new AndExpression(this.expressions.concat(o))},OrExpression.prototype=new NaryLogicalExpression,OrExpression.prototype.constructor=OrExpression,OrExpression.prototype.or=function(o){return new OrExpression(this.expressions.concat(o))},Field.prototype.__comparison=function(o,r){return r instanceof Field?new FieldComparison(this.field,o,r.field):new ValueComparison(this.field,o,r)},Field.prototype.equalTo=Field.prototype.eq=function(o){return this.__comparison(\"$eq\",o)},Field.prototype.greaterThan=Field.prototype.gt=function(o){return this.__comparison(\"$gt\",o)},FieldComparison.prototype=new QueryExpression,FieldComparison.prototype.constructor=FieldComparison,ValueComparison.prototype=new QueryExpression,ValueComparison.prototype.constructor=ValueComparison;","exports.RestRequest=function(t,e,s){this.method=\"string\"==typeof t?t.toLowerCase():\"\",this.METHOD=this.method.toUpperCase(),this.body=s,this.url=e};"]}